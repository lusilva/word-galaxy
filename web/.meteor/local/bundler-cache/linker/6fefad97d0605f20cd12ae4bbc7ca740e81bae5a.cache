[{"type":"js","data":"(function () {\n\n/* Imports */\nvar Meteor = Package.meteor.Meteor;\nvar _ = Package.underscore._;\n\n/* Package-scope variables */\nvar WebAppHashing;\n\n(function(){\n\n//////////////////////////////////////////////////////////////////////////////\n//                                                                          //\n// packages/webapp-hashing/webapp-hashing.js                                //\n//                                                                          //\n//////////////////////////////////////////////////////////////////////////////\n                                                                            //\nvar crypto = Npm.require(\"crypto\");                                         // 1\n                                                                            // 2\nWebAppHashing = {};                                                         // 3\n                                                                            // 4\n// Calculate a hash of all the client resources downloaded by the           // 5\n// browser, including the application HTML, runtime config, code, and       // 6\n// static files.                                                            // 7\n//                                                                          // 8\n// This hash *must* change if any resources seen by the browser             // 9\n// change, and ideally *doesn't* change for any server-only changes         // 10\n// (but the second is a performance enhancement, not a hard                 // 11\n// requirement).                                                            // 12\n                                                                            // 13\nWebAppHashing.calculateClientHash =                                         // 14\n  function (manifest, includeFilter, runtimeConfigOverride) {               // 15\n  var hash = crypto.createHash('sha1');                                     // 16\n                                                                            // 17\n  // Omit the old hashed client values in the new hash. These may be        // 18\n  // modified in the new boilerplate.                                       // 19\n  var runtimeCfg = _.omit(__meteor_runtime_config__,                        // 20\n    ['autoupdateVersion', 'autoupdateVersionRefreshable',                   // 21\n     'autoupdateVersionCordova']);                                          // 22\n                                                                            // 23\n  if (runtimeConfigOverride) {                                              // 24\n    runtimeCfg = runtimeConfigOverride;                                     // 25\n  }                                                                         // 26\n                                                                            // 27\n  hash.update(JSON.stringify(runtimeCfg, 'utf8'));                          // 28\n                                                                            // 29\n  _.each(manifest, function (resource) {                                    // 30\n      if ((! includeFilter || includeFilter(resource.type)) &&              // 31\n          (resource.where === 'client' || resource.where === 'internal')) {\n      hash.update(resource.path);                                           // 33\n      hash.update(resource.hash);                                           // 34\n    }                                                                       // 35\n  });                                                                       // 36\n  return hash.digest('hex');                                                // 37\n};                                                                          // 38\n                                                                            // 39\n                                                                            // 40\n//////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n/* Exports */\nif (typeof Package === 'undefined') Package = {};\nPackage['webapp-hashing'] = {\n  WebAppHashing: WebAppHashing\n};\n\n})();\n","servePath":"/packages/webapp-hashing.js","sourceMap":{"version":3,"sources":["/packages/webapp-hashing/webapp-hashing.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iF","file":"/packages/webapp-hashing.js","sourcesContent":["var crypto = Npm.require(\"crypto\");\n\nWebAppHashing = {};\n\n// Calculate a hash of all the client resources downloaded by the\n// browser, including the application HTML, runtime config, code, and\n// static files.\n//\n// This hash *must* change if any resources seen by the browser\n// change, and ideally *doesn't* change for any server-only changes\n// (but the second is a performance enhancement, not a hard\n// requirement).\n\nWebAppHashing.calculateClientHash =\n  function (manifest, includeFilter, runtimeConfigOverride) {\n  var hash = crypto.createHash('sha1');\n\n  // Omit the old hashed client values in the new hash. These may be\n  // modified in the new boilerplate.\n  var runtimeCfg = _.omit(__meteor_runtime_config__,\n    ['autoupdateVersion', 'autoupdateVersionRefreshable',\n     'autoupdateVersionCordova']);\n\n  if (runtimeConfigOverride) {\n    runtimeCfg = runtimeConfigOverride;\n  }\n\n  hash.update(JSON.stringify(runtimeCfg, 'utf8'));\n\n  _.each(manifest, function (resource) {\n      if ((! includeFilter || includeFilter(resource.type)) &&\n          (resource.where === 'client' || resource.where === 'internal')) {\n      hash.update(resource.path);\n      hash.update(resource.hash);\n    }\n  });\n  return hash.digest('hex');\n};\n\n"]}}]